<!DOCTYPE html>
<html lang="en">
<head>
	<title>Backbone Camera View Demo</title>
    <link type="text/css" href="../src/styles/camera.css" rel="stylesheet" />
    <style>
        .bcv-camera {
            border: 1px solid gray;
            /*height: 500px;
            width: 1000px;*/
        }

        .bcv-content {
            background-color: lightgray;
            top: 0px;
            left: 0px;
        }
        .container {
            display: flex;
        }
        .actions {
            flex: 1;
        }
        input {
            width: 3em;
        }
        [disabled] {
            background-color: #eee;
            border: 2px solid #ccc;
        }
    </style>
</head>
<body>
    <h1>Backbone Camera View</h1>
    
    <div class="container">
        <div id="camera" class="bcv-camera">
            <div class="behavior-transparent" style="box-sizing: border-box; position: absolute; top: 0; left: 0; width: 100px; height: 100px; border: 1px solid blue; z-index: 1;"></div>
            <div class="behavior-transparent" style="box-sizing: border-box; position: absolute; top: 0; left: 0; width: 200px; height: 200px; border: 1px solid red; z-index: 1;"></div>

            <div class="behavior-transparent" style="box-sizing: border-box; position: absolute; top: 105px; left: 180px; width: 3px; height: 3px; background-color: red; z-index: 1;"></div>
            <div class="behavior-transparent" style="box-sizing: border-box; position: absolute; top: 249px; left: 615px; width: 3px; height: 3px; background-color: red; z-index: 1;"></div>

            <div class="behavior-transparent" style="box-sizing: border-box; position: absolute; top: 50%; left: 50%; width: 50px; height: 2px; background-color: red; transform: translateX(-25px) translateY(-1px); z-index: 1;"></div>
            <div class="behavior-transparent" style="box-sizing: border-box; position: absolute; top: 50%; left: 50%; width: 2px; height: 50px; background-color: red; transform: translateX(-1px) translateY(-25px); z-index: 1;"></div>
        </div>
        
        <div id="content" class="bcv-content">
            <img src="images/FFL-Spritesheet-White-1827x1215.png" alt="Final Fantasy Legend Sprites" width="1827" height="1215" />
            <div id="box100" style="box-sizing: border-box; position: absolute; top: 0; left: 0; width: 100px; height: 100px; border: 1px solid green;"></div>
            <div style="box-sizing: border-box; position: absolute; top: 0; left: 0; width: 150px; height: 150px; border: 1px solid green;"></div>
            <div style="box-sizing: border-box; position: absolute; top: 0; left: 0; width: 200px; height: 200px; border: 1px solid green;"></div>
            <div style="box-sizing: border-box; position: absolute; top: 0; left: 0; width: 250px; height: 250px; border: 1px solid green;"></div>
            <div style="box-sizing: border-box; position: absolute; top: 0; left: 0; width: 300px; height: 300px; border: 1px solid green;"></div>
        </div>
        
        <div class="actions">
            <ul>
                <li>zoom: <input id="focusOnScale" type="text" placeholder="2" disabled />
                    x: <input id="focusOnX" type="text" placeholder="300" />
                    y: <input id="focusOnY" type="text" placeholder="300" />
                    <button id="focusOn">focusOn</button>
                </li>
                <li>zoom: <input id="zoomToScale" type="text" placeholder="2" />
                    x: <input id="zoomToX" type="text" placeholder="300" disabled />
                    y: <input id="zoomToY" type="text" placeholder="300" disabled />
                    <button id="zoomTo">zoomTo</button>
                </li>
                <li>zoom: <input id="zoomAtScale" type="text" placeholder="2" />
                    x: <input id="zoomAtX" type="text" placeholder="300" />
                    y: <input id="zoomAtY" type="text" placeholder="300" />
                    <button id="zoomAt">zoomAt</button>
                </li>
                <li>zoom: <input id="zoomOnScale" type="text" placeholder="2" />
                    x: <input id="zoomOnX" type="text" placeholder="300" />
                    y: <input id="zoomOnY" type="text" placeholder="300" />
                    <button id="zoomOn">zoomOn</button>
                </li>
                <li>
                    <button id="pause">Pause</button>
                </li>
                <li>
                    <button id="play">Play</button>
                </li>
                <!--<li>
                    velocity x: <input id="velocityX" type="text" placeholder="1000" />
                    velocity y: <input id="velocityY" type="text" placeholder="-500" />
                    <button id="flick">flick</button>
                </li>-->
            </ul>
            <ul>
                <li>animations: <span id="debugAnimations"></span></li>
                <li>focusX: <span id="debugFocusX"></span></li>
                <li>focusY: <span id="debugFocusY"></span></li>
                <li>isAnimating: <span id="debugIsAnimating"></span></li>
                <li>isPaused: <span id="debugIsPaused"></span></li>
                <li>isTransitioning: <span id="debugIsTransitioning"></span></li>
                <li>zoom: <span id="debugZoom"></span></li>
                <li>minZoom: <span id="debugMinZoom"></span></li>
                <li>maxZoom: <span id="debugMaxZoom"></span></li>
                <li>zoomOriginX: <span id="debugZoomOriginX"></span></li>
                <li>zoomOriginY: <span id="debugZoomOriginY"></span></li>
            </ul>
        </div>
    </div>
    
    <script type="text/javascript" src="../src/scripts/lib/zepto.min.js"></script>
    <script type="text/javascript" src="../src/scripts/lib/lodash.min.js"></script>
    <script type="text/javascript" src="../src/scripts/lib/backbone-min.js"></script>
    <script type="text/javascript" src="../src/scripts/lib/Draggable.min.js"></script>
    <script type="text/javascript" src="../src/scripts/lib/TweenMax.min.js"></script>
    <script type="text/javascript" src="../src/scripts/constants.js"></script>
    <script type="text/javascript" src="../src/scripts/utils.js"></script>
    <script type="text/javascript" src="../src/scripts/focuser.js"></script>
    <script type="text/javascript" src="../src/scripts/sizableView.js"></script>
    <script type="text/javascript" src="../src/scripts/cameraContentView.js"></script>
    <script type="text/javascript" src="../src/scripts/cameraView.js"></script>
    
    <script type="text/javascript">
        // App
        var app = Object.assign({}, Backbone.Events, {

            initialize: function () {
                // Views
//                app.cameraContentView = new CameraContentView({
//                    el: document.getElementById('content'),
//                }).render();
                app.camera = new CameraView({
                    el: document.getElementById('camera'),
                    content: document.getElementById('content'),
                    width: 1000,
                    height: 500,
                    focus: {
                        x: 500,
                        y: 250
                    },
                    focusX: 500,
                    focusY: 250,
                    focusBounds: {
                        left: 0,
                        right: 1827,
                        top: 0,
                        bottom: 1219
                    },
                    bounds: {
                        left: 0,
                        right: 1827,
                        top: 0,
                        bottom: 1219
                    },
                    debug: true
                }).render();

                $('#flick').on('click', app.flick);
                $('#focusOn').on('click', app.focusOn);
                $('#pause').on('click', app.pause);
                $('#play').on('click', app.play);
                $('#zoomTo').on('click', app.zoomTo);
                $('#zoomAt').on('click', app.zoomAt);
                $('#zoomOn').on('click', app.zoomOn);

//                window.cameraContentView = app.cameraContentView;
                window.camera = app.camera;
            },

            flick: function () {
                app.camera.dragDeccelerate({ 
                    x: parseFloat($('#velocityX').val()), 
                    y: parseFloat($('#velocityY').val())
                }, 16.6, window.performance.now());
            },
            
            focusOn: function () {
                app.camera.focusOnXY(parseFloat($('#focusOnX').val()), parseFloat($('#focusOnY').val()), 1);
            },
            
            pause: function () {
                app.camera.pause();
            },
            
            play: function () {
                app.camera.play();
            },
            
            zoomTo: function () {
                app.camera.zoomTo(parseFloat($('#zoomToScale').val()), 1);
            },
            
            zoomAt: function () {
                app.camera.zoomAtXY(parseFloat($('#zoomAtScale').val()), parseFloat($('#zoomAtX').val()), parseFloat($('#zoomAtY').val()), 1);
            },
            
            zoomOn: function () {
                app.camera.zoomOnXY(parseFloat($('#zoomOnScale').val()), parseFloat($('#zoomOnX').val()), parseFloat($('#zoomOnY').val()), 1);
            }
        });

        app.initialize();
    </script>
    
</body>
</html>