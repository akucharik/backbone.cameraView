!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Oculo=e()}}(function(){return function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return o(n?n:e)},l,l.exports,e,t,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){var i={EventEmitter:e("./lib/BaseEventEmitter"),EmitterSubscription:e("./lib/EmitterSubscription")};t.exports=i},{"./lib/BaseEventEmitter":2,"./lib/EmitterSubscription":3}],2:[function(e,t,n){(function(n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=e("./EmitterSubscription"),r=e("./EventSubscriptionVendor"),a=e("fbjs/lib/emptyFunction"),s=e("fbjs/lib/invariant"),u=function(){function e(){i(this,e),this._subscriber=new r,this._currentSubscription=null}return e.prototype.addListener=function(e,t,n){return this._subscriber.addSubscription(e,new o(this._subscriber,t,n))},e.prototype.once=function(e,t,n){var i=this;return this.addListener(e,function(){i.removeCurrentListener(),t.apply(n,arguments)})},e.prototype.removeAllListeners=function(e){this._subscriber.removeAllSubscriptions(e)},e.prototype.removeCurrentListener=function(){this._currentSubscription?void 0:"production"!==n.env.NODE_ENV?s(!1,"Not in an emitting cycle; there is no current subscription"):s(!1),this._subscriber.removeSubscription(this._currentSubscription)},e.prototype.listeners=function(e){var t=this._subscriber.getSubscriptionsForType(e);return t?t.filter(a.thatReturnsTrue).map(function(e){return e.listener}):[]},e.prototype.emit=function(e){var t=this._subscriber.getSubscriptionsForType(e);if(t){for(var n=Object.keys(t),i=0;i<n.length;i++){var o=n[i],r=t[o];r&&(this._currentSubscription=r,this.__emitToSubscription.apply(this,[r].concat(Array.prototype.slice.call(arguments))))}this._currentSubscription=null}},e.prototype.__emitToSubscription=function(e,t){var n=Array.prototype.slice.call(arguments,2);e.listener.apply(e.context,n)},e}();t.exports=u}).call(this,e("_process"))},{"./EmitterSubscription":3,"./EventSubscriptionVendor":5,_process:60,"fbjs/lib/emptyFunction":6,"fbjs/lib/invariant":7}],3:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=e("./EventSubscription"),a=function(e){function t(n,o,r){i(this,t),e.call(this,n),this.listener=o,this.context=r}return o(t,e),t}(r);t.exports=a},{"./EventSubscription":4}],4:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(t){i(this,e),this.subscriber=t}return e.prototype.remove=function(){this.subscriber&&(this.subscriber.removeSubscription(this),this.subscriber=null)},e}();t.exports=o},{}],5:[function(e,t,n){(function(n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=e("fbjs/lib/invariant"),r=function(){function e(){i(this,e),this._subscriptionsForType={},this._currentSubscription=null}return e.prototype.addSubscription=function(e,t){t.subscriber!==this?"production"!==n.env.NODE_ENV?o(!1,"The subscriber of the subscription is incorrectly set."):o(!1):void 0,this._subscriptionsForType[e]||(this._subscriptionsForType[e]=[]);var i=this._subscriptionsForType[e].length;return this._subscriptionsForType[e].push(t),t.eventType=e,t.key=i,t},e.prototype.removeAllSubscriptions=function(e){void 0===e?this._subscriptionsForType={}:delete this._subscriptionsForType[e]},e.prototype.removeSubscription=function(e){var t=e.eventType,n=e.key,i=this._subscriptionsForType[t];i&&delete i[n]},e.prototype.getSubscriptionsForType=function(e){return this._subscriptionsForType[e]},e}();t.exports=r}).call(this,e("_process"))},{_process:60,"fbjs/lib/invariant":7}],6:[function(e,t,n){"use strict";function i(e){return function(){return e}}var o=function(){};o.thatReturns=i,o.thatReturnsFalse=i(!1),o.thatReturnsTrue=i(!0),o.thatReturnsNull=i(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},t.exports=o},{}],7:[function(e,t,n){"use strict";function i(e,t,n,i,o,r,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,i,o,r,a,s],l=0;u=new Error(t.replace(/%s/g,function(){return c[l++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}t.exports=i},{}],8:[function(e,t,n){var i=e("./_root"),o=i.Symbol;t.exports=o},{"./_root":34}],9:[function(e,t,n){function i(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}t.exports=i},{}],10:[function(e,t,n){function i(e,t){for(var n=-1,i=null==e?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}t.exports=i},{}],11:[function(e,t,n){function i(e,t){for(var n=-1,i=t.length,o=e.length;++n<i;)e[o+n]=t[n];return e}t.exports=i},{}],12:[function(e,t,n){function i(e,t,n){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var o=e("./_defineProperty");t.exports=i},{"./_defineProperty":22}],13:[function(e,t,n){function i(e,t,n){return e===e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}t.exports=i},{}],14:[function(e,t,n){function i(e,t,n,a,s){var u=-1,c=e.length;for(n||(n=r),s||(s=[]);++u<c;){var l=e[u];t>0&&n(l)?t>1?i(l,t-1,n,a,s):o(s,l):a||(s[s.length]=l)}return s}var o=e("./_arrayPush"),r=e("./_isFlattenable");t.exports=i},{"./_arrayPush":11,"./_isFlattenable":29}],15:[function(e,t,n){function i(e){return null==e?void 0===e?u:s:(e=Object(e),c&&c in e?r(e):a(e))}var o=e("./_Symbol"),r=e("./_getRawTag"),a=e("./_objectToString"),s="[object Null]",u="[object Undefined]",c=o?o.toStringTag:void 0;t.exports=i},{"./_Symbol":8,"./_getRawTag":27,"./_objectToString":31}],16:[function(e,t,n){function i(e){return r(e)&&o(e)==a}var o=e("./_baseGetTag"),r=e("./isObjectLike"),a="[object Arguments]";t.exports=i},{"./_baseGetTag":15,"./isObjectLike":53}],17:[function(e,t,n){function i(e){if(!a(e)||r(e))return!1;var t=o(e)?m:c;return t.test(s(e))}var o=e("./isFunction"),r=e("./_isMasked"),a=e("./isObject"),s=e("./_toSource"),u=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,l=Function.prototype,h=Object.prototype,f=l.toString,d=h.hasOwnProperty,m=RegExp("^"+f.call(d).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=i},{"./_isMasked":30,"./_toSource":38,"./isFunction":49,"./isObject":52}],18:[function(e,t,n){function i(e,t){return e=Object(e),o(e,t,function(t,n){return n in e})}var o=e("./_basePickBy");t.exports=i},{"./_basePickBy":19}],19:[function(e,t,n){function i(e,t,n){for(var i=-1,r=t.length,a={};++i<r;){var s=t[i],u=e[s];n(u,s)&&o(a,s,u)}return a}var o=e("./_baseAssignValue");t.exports=i},{"./_baseAssignValue":12}],20:[function(e,t,n){var i=e("./constant"),o=e("./_defineProperty"),r=e("./identity"),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:i(t),writable:!0})}:r;t.exports=a},{"./_defineProperty":22,"./constant":40,"./identity":43}],21:[function(e,t,n){var i=e("./_root"),o=i["__core-js_shared__"];t.exports=o},{"./_root":34}],22:[function(e,t,n){var i=e("./_getNative"),o=function(){try{var e=i(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();t.exports=o},{"./_getNative":25}],23:[function(e,t,n){function i(e){return a(r(e,void 0,o),e+"")}var o=e("./flatten"),r=e("./_overRest"),a=e("./_setToString");t.exports=i},{"./_overRest":33,"./_setToString":35,"./flatten":42}],24:[function(e,t,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],25:[function(e,t,n){function i(e,t){var n=r(e,t);return o(n)?n:void 0}var o=e("./_baseIsNative"),r=e("./_getValue");t.exports=i},{"./_baseIsNative":17,"./_getValue":28}],26:[function(e,t,n){var i=e("./_overArg"),o=i(Object.getPrototypeOf,Object);t.exports=o},{"./_overArg":32}],27:[function(e,t,n){function i(e){var t=a.call(e,u),n=e[u];try{e[u]=void 0;var i=!0}catch(e){}var o=s.call(e);return i&&(t?e[u]=n:delete e[u]),o}var o=e("./_Symbol"),r=Object.prototype,a=r.hasOwnProperty,s=r.toString,u=o?o.toStringTag:void 0;t.exports=i},{"./_Symbol":8}],28:[function(e,t,n){function i(e,t){return null==e?void 0:e[t]}t.exports=i},{}],29:[function(e,t,n){function i(e){return a(e)||r(e)||!!(s&&e&&e[s])}var o=e("./_Symbol"),r=e("./isArguments"),a=e("./isArray"),s=o?o.isConcatSpreadable:void 0;t.exports=i},{"./_Symbol":8,"./isArguments":44,"./isArray":45}],30:[function(e,t,n){function i(e){return!!r&&r in e}var o=e("./_coreJsData"),r=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();t.exports=i},{"./_coreJsData":21}],31:[function(e,t,n){function i(e){return r.call(e)}var o=Object.prototype,r=o.toString;t.exports=i},{}],32:[function(e,t,n){function i(e,t){return function(n){return e(t(n))}}t.exports=i},{}],33:[function(e,t,n){function i(e,t,n){return t=r(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,s=r(i.length-t,0),u=Array(s);++a<s;)u[a]=i[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=i[a];return c[t]=n(u),o(e,this,c)}}var o=e("./_apply"),r=Math.max;t.exports=i},{"./_apply":9}],34:[function(e,t,n){var i=e("./_freeGlobal"),o="object"==typeof self&&self&&self.Object===Object&&self,r=i||o||Function("return this")();t.exports=r},{"./_freeGlobal":24}],35:[function(e,t,n){var i=e("./_baseSetToString"),o=e("./_shortOut"),r=o(i);t.exports=r},{"./_baseSetToString":20,"./_shortOut":36}],36:[function(e,t,n){function i(e){var t=0,n=0;return function(){var i=a(),s=r-(i-n);if(n=i,s>0){if(++t>=o)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var o=800,r=16,a=Date.now;t.exports=i},{}],37:[function(e,t,n){function i(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-r?"-0":t}var o=e("./isSymbol"),r=1/0;t.exports=i},{"./isSymbol":55}],38:[function(e,t,n){function i(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var o=Function.prototype,r=o.toString;t.exports=i},{}],39:[function(e,t,n){function i(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=r(n),n=n===n?n:0),void 0!==t&&(t=r(t),t=t===t?t:0),o(r(e),t,n)}var o=e("./_baseClamp"),r=e("./toNumber");t.exports=i},{"./_baseClamp":13,"./toNumber":59}],40:[function(e,t,n){function i(e){return function(){return e}}t.exports=i},{}],41:[function(e,t,n){function i(e,t,n){function i(t){var n=g,i=b;return g=b=void 0,P=t,w=e.apply(i,n)}function l(e){return P=e,O=setTimeout(d,t),x?i(e):w}function h(e){var n=e-k,i=e-P,o=t-n;return T?c(o,_-i):o}function f(e){var n=e-k,i=e-P;return void 0===k||n>=t||n<0||T&&i>=_}function d(){var e=r();return f(e)?m(e):void(O=setTimeout(d,h(e)))}function m(e){return O=void 0,S&&g?i(e):(g=b=void 0,w)}function v(){void 0!==O&&clearTimeout(O),P=0,g=k=b=O=void 0}function p(){return void 0===O?w:m(r())}function y(){var e=r(),n=f(e);if(g=arguments,b=this,k=e,n){if(void 0===O)return l(k);if(T)return O=setTimeout(d,t),i(k)}return void 0===O&&(O=setTimeout(d,t)),w}var g,b,_,w,O,k,P=0,x=!1,T=!1,S=!0;if("function"!=typeof e)throw new TypeError(s);return t=a(t)||0,o(n)&&(x=!!n.leading,T="maxWait"in n,_=T?u(a(n.maxWait)||0,t):_,S="trailing"in n?!!n.trailing:S),y.cancel=v,y.flush=p,y}var o=e("./isObject"),r=e("./now"),a=e("./toNumber"),s="Expected a function",u=Math.max,c=Math.min;t.exports=i},{"./isObject":52,"./now":56,"./toNumber":59}],42:[function(e,t,n){function i(e){var t=null==e?0:e.length;return t?o(e,1):[]}var o=e("./_baseFlatten");t.exports=i},{"./_baseFlatten":14}],43:[function(e,t,n){function i(e){return e}t.exports=i},{}],44:[function(e,t,n){var i=e("./_baseIsArguments"),o=e("./isObjectLike"),r=Object.prototype,a=r.hasOwnProperty,s=r.propertyIsEnumerable,u=i(function(){return arguments}())?i:function(e){return o(e)&&a.call(e,"callee")&&!s.call(e,"callee")};t.exports=u},{"./_baseIsArguments":16,"./isObjectLike":53}],45:[function(e,t,n){var i=Array.isArray;t.exports=i},{}],46:[function(e,t,n){function i(e){return null!=e&&r(e.length)&&!o(e)}var o=e("./isFunction"),r=e("./isLength");t.exports=i},{"./isFunction":49,"./isLength":50}],47:[function(e,t,n){function i(e){return o(e)&&1===e.nodeType&&!r(e)}var o=e("./isObjectLike"),r=e("./isPlainObject");t.exports=i},{"./isObjectLike":53,"./isPlainObject":54}],48:[function(e,t,n){function i(e){return"number"==typeof e&&r(e)}var o=e("./_root"),r=o.isFinite;t.exports=i},{"./_root":34}],49:[function(e,t,n){function i(e){if(!r(e))return!1;var t=o(e);return t==s||t==u||t==a||t==c}var o=e("./_baseGetTag"),r=e("./isObject"),a="[object AsyncFunction]",s="[object Function]",u="[object GeneratorFunction]",c="[object Proxy]";t.exports=i},{"./_baseGetTag":15,"./isObject":52}],50:[function(e,t,n){function i(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}var o=9007199254740991;t.exports=i},{}],51:[function(e,t,n){function i(e){return null==e}t.exports=i},{}],52:[function(e,t,n){function i(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}t.exports=i},{}],53:[function(e,t,n){function i(e){return null!=e&&"object"==typeof e}t.exports=i},{}],54:[function(e,t,n){function i(e){if(!a(e)||o(e)!=s)return!1;var t=r(e);if(null===t)return!0;var n=h.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==f}var o=e("./_baseGetTag"),r=e("./_getPrototype"),a=e("./isObjectLike"),s="[object Object]",u=Function.prototype,c=Object.prototype,l=u.toString,h=c.hasOwnProperty,f=l.call(Object);t.exports=i},{"./_baseGetTag":15,"./_getPrototype":26,"./isObjectLike":53}],55:[function(e,t,n){function i(e){return"symbol"==typeof e||r(e)&&o(e)==a}var o=e("./_baseGetTag"),r=e("./isObjectLike"),a="[object Symbol]";t.exports=i},{"./_baseGetTag":15,"./isObjectLike":53}],56:[function(e,t,n){var i=e("./_root"),o=function(){return i.Date.now()};t.exports=o},{"./_root":34}],57:[function(e,t,n){var i=e("./_arrayMap"),o=e("./_basePick"),r=e("./_flatRest"),a=e("./_toKey"),s=r(function(e,t){return null==e?{}:o(e,i(t,a))});t.exports=s},{"./_arrayMap":10,"./_basePick":18,"./_flatRest":23,"./_toKey":37}],58:[function(e,t,n){function i(e,t,n){var i=!0,s=!0;if("function"!=typeof e)throw new TypeError(a);return r(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),o(e,t,{leading:i,maxWait:t,trailing:s})}var o=e("./debounce"),r=e("./isObject"),a="Expected a function";t.exports=i},{"./debounce":41,"./isObject":52}],59:[function(e,t,n){function i(e){if("number"==typeof e)return e;if(r(e))return a;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=c.test(e);return n||l.test(e)?h(e.slice(2),n?2:8):u.test(e)?a:+e}var o=e("./isObject"),r=e("./isSymbol"),a=NaN,s=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,h=parseInt;t.exports=i},{"./isObject":52,"./isSymbol":55}],60:[function(e,t,n){function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function r(e){if(h===setTimeout)return setTimeout(e,0);if((h===i||!h)&&setTimeout)return h=setTimeout,setTimeout(e,0);try{return h(e,0)}catch(t){try{return h.call(null,e,0)}catch(t){return h.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){p&&m&&(p=!1,m.length?v=m.concat(v):y=-1,v.length&&u())}function u(){if(!p){var e=r(s);p=!0;for(var t=v.length;t;){for(m=v,v=[];++y<t;)m&&m[y].run();y=-1,t=v.length}m=null,p=!1,a(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var h,f,d=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:i}catch(e){h=i}try{f="function"==typeof clearTimeout?clearTimeout:o}catch(e){f=o}}();var m,v=[],p=!1,y=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];v.push(new c(e,t)),1!==v.length||p||r(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],61:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},c=e("lodash/isElement"),l=(i(c),e("lodash/isFinite")),h=(i(l),e("lodash/isFunction")),f=i(h),d=e("lodash/pick"),m=i(d),v=e("lodash/isNil"),p=i(v),y=e("lodash/isObject"),g=(i(y),e("./constants")),b=e("./math/math"),_=i(b),w=e("./math/matrix2"),O=i(w),k=e("./utils"),P=i(k),x=e("./math/vector2"),T=i(x),S={type:{CORE:1}},C=["destroyOnComplete","disableDrag","disableWheel"],E=["delay","paused","useFrames","repeat","repeatDelay","yoyo","onComplete","onCompleteParams","onStart","onStartParams","onUpdate","onUpdateParams","onRepeat","onRepeatParams","onReverseComplete","onReverseCompleteParams","callbackScope"],A=C.concat(E),j=["enforceBounds","fadeDelay","fadeDuration","fadeEase","shakeDelay","shakeDirection","shakeDuration","shakeEase","shakeEaseIn","shakeEaseOut"],M=["delay","ease","overwrite"],D=["onComplete","onCompleteParams","onStart","onStartParams","onUpdate","onUpdateParams","onReverseComplete","onReverseCompleteParams","callbackScope"],R=j.concat(M,D),N=j.concat(M),z=function(e){function t(e,n){o(this,t),n=Object.assign({paused:!0},(0,m.default)(n,A));var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},n)));return i.config=n,i.type=g.Type.ANIMATION,i.camera=e||null,i.coreTweens=[],i.currentKeyframe=null,i.destroyOnComplete=!!n.destroyOnComplete,i.disableWheel=n.disableWheel!==!1,i.previousProps={},i._onStart=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._initCoreTween(this.coreTweens[0]),this.camera.isAnimating=!0,this.disableWheel&&this.camera.disableWheelToZoom(),void 0===this.config.onStart||e||this.config.onStart.apply(this,this.config.onStartParams)},i._onUpdate=function(){void 0!==this.config.onUpdate&&this.config.onUpdate.apply(this,this.config.onUpdateParams),this.camera.render()},i._onComplete=function(){this.camera.isAnimating=!1,this.camera.enableWheelToZoom(),void 0!==this.config.onComplete&&this.config.onComplete.apply(this,this.config.onCompleteParams),this.destroyOnComplete&&this.destroy()},i._onRepeat=function(){this._onStart(!0),void 0!==this.config.onRepeat&&this.config.onRepeat.apply(this,this.config.onRepeatParams)},i.eventCallback("onStart",i._onStart),i.eventCallback("onUpdate",i._onUpdate),i.eventCallback("onComplete",i._onComplete),i.eventCallback("onRepeat",i._onRepeat),i}return a(t,e),s(t,[{key:"_animate",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i=(0,m.default)(i,R);var o=new TimelineLite({data:{onStart:i.onStart,onStartParams:i.onStartParams,onUpdate:i.onUpdate,onUpdateParams:i.onUpdateParams,onComplete:i.onComplete,onCompleteParams:i.onCompleteParams,onReverseComplete:i.onReverseComplete,onReverseCompleteParams:i.onReverseCompleteParams},callbackScope:this,onStartParams:["{self}"],onStart:function(e){this.currentKeyframe=e,void 0!==e.data.onStart&&e.data.onStart.apply(this,e.data.onStartParams)},onUpdateParams:["{self}"],onUpdate:function(e){void 0!==e.data.onUpdate&&e.data.onUpdate.apply(this,e.data.onUpdateParams)},onCompleteParams:["{self}"],onComplete:function(e){void 0!==e.data.onComplete&&e.data.onComplete.apply(this,e.data.onCompleteParams)},onReverseCompleteParams:["{self}"],onReverseComplete:function(e){void 0!==e.data.onReverseComplete&&e.data.onReverseComplete.apply(this,e.data.onReverseCompleteParams)}}),r=this._parseFade(e,n,i),a=null,s=this._parseShake(e,n,i);if(D.forEach(function(e){delete i[e]}),e.origin||e.position||e.rotation||0===e.rotation||e.zoom){var u=TweenMax.to(this.camera,0===n?.016:n,Object.assign({},i,{data:{enforceBounds:i.enforceBounds!==!1},_rawOffsetX:0,_rawOffsetY:0,_rawScaleOffsetX:0,_rawScaleOffsetY:0,rotation:0,zoom:0,immediateRender:!1,callbackScope:this,onStartParams:["{self}"],onStart:function(e){var t=g.zoomDirection.NONE;e.props.to.zoom>this.camera.zoom?t=g.zoomDirection.IN:e.props.to.zoom<this.camera.zoom&&(t=g.zoomDirection.OUT),this.camera.zoomDirection=t,this.camera.setTransformOrigin(e.props.to.origin),e.timeline.core=e},onUpdateParams:["{self}"],onUpdate:function(e){var t,n=this.camera._rawOffset;e.props.to.isOriginAuto&&e.props.to.isPositionChanging&&e.props.to.isRotationChanging&&(t=this.camera._convertOffsetToPosition(this.camera._rawScaleOffset,this.camera.center,this.camera.transformOrigin,this.camera.scaleTransformation),n=this.camera._convertPositionToOffset(t,this.camera.center,this.camera.transformOrigin,this.camera.transformation)),this.camera.setPosition(this.camera._convertOffsetToPosition(n,this.camera.center,this.camera.transformOrigin,this.camera.transformation),e.data.enforceBounds)},onCompleteParams:["{self}"],onComplete:function(e){this._initCoreTween(this.coreTweens[e.index+1],e.props.end)},onReverseCompleteParams:["{self}"],onReverseComplete:function(e){this.camera.setTransformOrigin(e.props.start.origin)}}));u.type=S.type.CORE,u.props={source:{},parsed:{},to:{},start:{},end:{}},u.props.source.origin=e.origin,u.props.source.position=e.position,u.props.source.rotation=e.rotation,u.props.source.zoom=e.zoom,u.index=this.coreTweens.length,this.coreTweens.push(u),o.add(u,0)}return r.opacity&&o.to(this.camera,0===r.duration?.016:r.duration,Object.assign({},i,{fadeOpacity:r.opacity,ease:r.ease,delay:r.delay},0)),s.duration>0&&s.intensity>0&&(a=new TimelineLite(Object.assign({},i,{data:{intensity:0,direction:s.direction,enforceBounds:i.enforceBounds!==!1},delay:s.delay,callbackScope:this,onStartParams:["{self}"],onStart:function(e){e.timeline.shake=e},onUpdateParams:["{self}"],onUpdate:function(e){var n=0===e.progress(),i=1===e.progress(),o=0,r=0,a=this.camera._clampPosition(this.camera._convertOffsetToPosition(this.camera._rawOffset,this.camera.center,this.camera.transformOrigin,this.camera.transformation));e.data.direction!==t.shake.direction.HORIZONTAL&&e.data.direction!==t.shake.direction.BOTH||n||i||(o=Math.random()*e.data.intensity*this.camera.width*2-e.data.intensity*this.camera.width,a.x+=o),e.data.direction!==t.shake.direction.VERTICAL&&e.data.direction!==t.shake.direction.BOTH||n||i||(r=Math.random()*e.data.intensity*this.camera.height*2-e.data.intensity*this.camera.height,a.y+=r),this.camera.setPosition(a,e.data.enforceBounds)},onCompleteParams:["{self}"]})),s.easeIn&&s.easeOut?(a.fromTo(a.data,.5*s.duration,{intensity:0},{intensity:s.intensity,ease:s.easeIn},0),a.to(a.data,.5*s.duration,{intensity:0,ease:s.easeOut},.5*s.duration)):s.easeIn&&!s.easeOut?a.fromTo(a.data,s.duration,{intensity:0},{intensity:s.intensity,ease:s.easeIn},0):!s.easeIn&&s.easeOut?a.fromTo(a.data,s.duration,{intensity:s.intensity},{intensity:0,ease:s.easeOut},0):s.ease?a.fromTo(a.data,s.duration,{intensity:0},{intensity:s.intensity,ease:s.ease},0):(a.data.intensity=s.intensity,a.to(a.data,s.duration,{},0)),o.add(a,0)),this.add(o),this}},{key:"_calculateToProps",value:function(e,t){var n,i,o={origin:e.origin!==g.originKeyword.AUTO?e.origin:{},position:null!==e.position?e.position:{},rotation:e.rotation,zoom:e.zoom},r=!1,a=e.origin===g.originKeyword.AUTO,s=Number.isFinite(o.origin.x),u=Number.isFinite(o.origin.y),c=s||u,l=Number.isFinite(o.position.x),h=Number.isFinite(o.position.y),f=l||h,d=f,m=Number.isFinite(o.rotation)&&o.rotation!==t.rotation,v=Number.isFinite(o.zoom)&&o.zoom!==t.zoom,p=this.camera.center,y=(new O.default).scale(t.zoom,t.zoom).rotate(_.default.degToRad(-t.rotation)),b=new T.default(s?o.origin.x:t.origin.x,u?o.origin.y:t.origin.y),w=new T.default(l?o.position.x:t.position.x,h?o.position.y:t.position.y),k=m?o.rotation:t.rotation,P=v?o.zoom:t.zoom,x=(new O.default).scale(P,P),S=(new O.default).scale(P,P).rotate(_.default.degToRad(-k));return a&&!f?(r=!0,b.copy(t.position)):c&&!f?(r=!0,f=!0,p=this.camera._convertScenePositionToFOVPosition(b,t.position,this.camera.center,y),w=this.camera._convertScenePositionToCameraPosition(b,p,this.camera.center,b,S)):a&&f&&m&&b.copy(w),n=this.camera._convertPositionToOffset(w,this.camera.center,b,x),i=this.camera._convertPositionToOffset(w,this.camera.center,b,S),{isOriginAuto:a,isPositionChanging:f,isRotationChanging:m,scaleOffsetX:d?n.x:null,scaleOffsetY:d?n.y:null,offsetX:d?i.x:null,offsetY:d?i.y:null,origin:r||c||a&&f&&m?b:null,position:f?w:null,rotation:m?k:null,zoom:v?P:null}}},{key:"_getStartProps",value:function(){return{origin:this.camera.transformOrigin.clone(),position:this.camera.position.clone(),rotation:this.camera.rotation,zoom:this.camera.zoom}}},{key:"_getEndProps",value:function(e,t){return{origin:null!==e.origin?e.origin:t.origin,position:null!==e.position?e.position:t.position,rotation:null!==e.rotation?e.rotation:t.rotation,zoom:null!==e.zoom?e.zoom:t.zoom}}},{key:"_initCoreTween",value:function(e,t){if(void 0!==e){e.invalidate(),t=void 0!==t?t:this._getStartProps();var n=this._parseProps(e.props.source),i=this._calculateToProps(n,t),o=this._getEndProps(i,t);this.previousProps=t,e.props.start=t,e.props.end=o,e.props.parsed=n,e.props.to=i,this.camera._updateRawOffset(),this.camera.setTransformOrigin(i.origin),e.vars._rawOffsetX=i.offsetX,e.vars._rawOffsetY=i.offsetY,e.vars._rawScaleOffsetX=i.scaleOffsetX,e.vars._rawScaleOffsetY=i.scaleOffsetY,e.vars.rotation=i.rotation,e.vars.zoom=i.zoom}return this}},{key:"_parseProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.origin,n=void 0===t?null:t,i=e.position,o=void 0===i?null:i,r=e.rotation,a=void 0===r?null:r,s=e.zoom,u=void 0===s?null:s;return"previous"===o&&this.previousProps.position&&(o=this.previousProps.position),"previous"!==a||(0,p.default)(this.previousProps.rotation)||(a=this.previousProps.rotation),"previous"===u&&Number.isFinite(this.previousProps.zoom)&&(u=this.previousProps.zoom),{origin:P.default.parseOrigin(n,this.camera.scene,this.camera.transformation),position:P.default.parsePosition(o,this.camera.scene,this.camera.transformation),rotation:(0,f.default)(a)?a():a,zoom:(0,f.default)(u)?u():u}}},{key:"_parseFade",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{opacity:Number.isFinite(e.fadeOpacity)?e.fadeOpacity:null,delay:Number.isFinite(n.fadeDelay)?n.fadeDelay:n.delay||0,duration:Number.isFinite(n.fadeDuration)?n.fadeDuration:t,ease:n.fadeEase?n.fadeEase:n.ease||null}}},{key:"_parseShake",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{intensity:Number.isFinite(e.shakeIntensity)?e.shakeIntensity:null,delay:Number.isFinite(i.shakeDelay)?i.shakeDelay:i.delay||0,direction:i.shakeDirection?i.shakeDirection:t.shake.direction.BOTH,duration:Number.isFinite(i.shakeDuration)?i.shakeDuration:n,ease:i.shakeEase?i.shakeEase:i.ease||null,easeIn:i.shakeEaseIn,easeOut:i.shakeEaseOut}}},{key:"destroy",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"kill",this).call(this),this.camera=null,this.currentKeyframe=null,this.previousProps=null}},{key:"animate",value:function(e,t,n){return this._animate({fadeOpacity:e.fadeOpacity,origin:e.origin,position:e.position,rotation:e.rotation,shakeIntensity:e.shakeIntensity,zoom:e.zoom},t,n),this}},{key:"fadeTo",value:function(e,t,n){return this._animate({fadeOpacity:e},t,n),this}},{key:"moveTo",value:function(e,t,n){return this._animate({position:e},t,n),this}},{key:"rotateAt",value:function(e,t,n,i){return this._animate({origin:t,rotation:e},n,i),this}},{key:"rotateTo",value:function(e,t,n){return this._animate({rotation:e},t,n),this}},{key:"shake",value:function(e,t,n){return this._animate({shakeIntensity:e},t,n),this}},{key:"zoomAt",value:function(e,t,n,i){return this._animate({origin:t,zoom:e},n,i),this}},{key:"zoomTo",value:function(e,t,n){return this._animate({zoom:e},t,n),this}}],[{key:"_filterKeyframeEventCallbackOptions",value:function(e){return(0,m.default)(e,N)}}]),t}(TimelineMax);z.shake={direction:{BOTH:0,HORIZONTAL:1,VERTICAL:2}},n.default=z},{"./constants":64,"./math/math":67,"./math/matrix2":68,"./math/vector2":69,"./utils":74,"lodash/isElement":47,"lodash/isFinite":48,"lodash/isFunction":49,"lodash/isNil":51,"lodash/isObject":52,"lodash/pick":57}],62:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("./animation"),s=i(a),u=e("./constants"),c=function(){function e(t){o(this,e),this.camera=t,this.currentAnimation=null,this._animations={}}return r(e,[{key:"add",value:function(e,t){var n=void 0;return this._animations[e]&&this._animations[e].destroy(),t.type===u.Type.ANIMATION?n=t:(n=new s.default(this.camera,t.options),t.keyframes.forEach(function(e){n.animate({fadeOpacity:e.fadeOpacity,origin:e.origin,position:e.position,rotation:e.rotation,shakeIntensity:e.shakeIntensity,zoom:e.zoom},e.duration,e.options)})),this._animations[e]=n,this}},{key:"destroy",value:function(){for(var e in this._animations)this._animations[e].destroy();return this.camera=null,this.currentAnimation=null,this._animations={},this}},{key:"get",value:function(e){
return this._animations[e]}},{key:"pause",value:function(){return this.currentAnimation&&this.currentAnimation.pause(null,!1),this}},{key:"play",value:function(e){var t;return"string"==typeof e&&(t=this._animations[e]),t?(this.currentAnimation=t,this.currentAnimation.invalidate().restart(!0)):void 0===e&&this.currentAnimation&&this.currentAnimation.play(null,!1),this}},{key:"resume",value:function(){return this.currentAnimation&&this.currentAnimation.resume(null,!1),this}},{key:"reverse",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if("string"==typeof t&&(e=this._animations[t]),e)this.currentAnimation=e,this.currentAnimation.invalidate().reverse(0,!1);else if(null===t&&this.currentAnimation){this.currentAnimation.time();this.currentAnimation.reverse()}return this}},{key:"isAnimating",get:function(){var e=this.currentAnimation?this.currentAnimation.progress():0;return e>0&&e<1}},{key:"isPaused",get:function(){return!!this.currentAnimation&&this.currentAnimation.paused()}}]),e}();n.default=c},{"./animation":61,"./constants":64}],63:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("lodash/clamp"),s=i(a),u=e("lodash/isFunction"),c=i(u),l=e("./constants"),h=e("fbemitter"),f=e("./animation"),d=i(f),m=e("./animationManager"),v=i(m),p=e("./cssRenderer"),y=i(p),g=e("./math/math"),b=i(g),_=e("./math/matrix2"),w=i(_),O=e("./scene"),k=(i(O),e("./sceneManager")),P=i(k),x=e("./trackControl"),T=i(x),S=e("./utils"),C=i(S),E=e("./math/vector2"),A=i(E),j={ANONYMOUS:"_anonymous"},M=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.bounds,r=void 0===i?null:i,a=n.dragToMove,s=void 0!==a&&a,u=n.height,c=void 0===u?0:u,f=n.maxZoom,m=void 0===f?3:f,p=n.minZoom,g=void 0===p?.5:p,b=n.onInitialize,_=void 0===b?null:b,w=n.onBeforeRender,O=void 0===w?null:w,k=n.onRender,x=void 0===k?null:k,T=n.view,S=void 0===T?null:T,C=n.wheelToZoom,E=void 0!==C&&C,j=n.wheelToZoomIncrement,M=void 0===j?.01:j,D=n.width,R=void 0===D?0:D;o(this,e),this.animations=new v.default(this),this.bounds=r,this.center=new A.default(R,c).multiplyScalar(.5),this.dragToMove=s===!0,this.height=c,this.isAnimating=!1,this.isRendered=!1,this.minPositionX=null,this.minPositionY=null,this.maxPositionX=null,this.maxPositionY=null,this.minZoom=g,this.maxZoom=m,this.fadeOpacity=1,this.position=new A.default(0,0),this.renderer=new y.default(this),this.rotation=0,this.scenes=new P.default,this.trackControl=null,this.transformOrigin=new A.default(0,0),this.view=null,this.wheelToZoom=E===!0,this.wheelToZoomIncrement=M,this.width=R,this.zoomDirection=l.zoomDirection.NONE,this._events=new h.EventEmitter,this._rasterScale=1,this._rawOffset=new A.default(0,0),this._rawScaleOffset=new A.default(0,0),this._transformOriginOffset=new A.default(0,0),this._zoom=1,this.setPosition(new A.default(.5*R,.5*c)),null!==_&&(this.onInitialize=_),null!==O&&(this.onBeforeRender=O),null!==x&&(this.onRender=x),this.onResize=function(){null!==t.view&&(t.renderer.renderSize(),new d.default(t,{destroyOnComplete:!0,paused:!1,onComplete:function(e){if(this.camera.animations.currentAnimation){var t=this.camera.animations.currentAnimation,n=t.time();t.totalProgress()>0&&(t.seek(0).invalidate(),t.coreTweens[0]&&this.camera.setPosition(t.coreTweens[0].props.start.position),t.seek(n,!1)),e||this.camera.resume()}},onCompleteParams:[t.animations.isPaused]}).moveTo(t.position,0,{overwrite:!1}))},this._events.addListener("change:size",this.onResize),this.setView(S),this.onInitialize(arguments[0])}return r(e,[{key:"_clampPosition",value:function(e){return e.clone().set(this._clampPositionX(e.x),this._clampPositionY(e.y))}},{key:"_clampPositionX",value:function(e){return null!==this.bounds&&(e=(0,s.default)(e,this.minPositionX,this.maxPositionX)),e}},{key:"_clampPositionY",value:function(e){return null!==this.bounds&&(e=(0,s.default)(e,this.minPositionY,this.maxPositionY)),e}},{key:"_clampZoom",value:function(e){return(0,s.default)(e,this.minZoom,this.maxZoom)}},{key:"_convertFOVPositionToScenePosition",value:function(e,t,n,i){return t.clone().transform(i).subtract(n.clone().subtract(e)).transform(i.getInverse())}},{key:"_convertScenePositionToFOVPosition",value:function(e,t,n,i){return n.clone().add(e.clone().transform(i).subtract(t.clone().transform(i)))}},{key:"_convertScenePositionToCameraPosition",value:function(e,t,n,i,o){var r=this._getTransformOriginOffset(i,o),a=e.clone().transform(o).subtract(r).subtract(t);return this._convertOffsetToPosition(a,n,i,o)}},{key:"_convertOffsetToPosition",value:function(e,t,n,i){var o=this._getTransformOriginOffset(n,i);return e.clone().add(o).add(t).transform(i.getInverse())}},{key:"_convertPositionToOffset",value:function(e,t,n,i){var o=this._getTransformOriginOffset(n,i);return e.clone().transform(i).subtract(o).subtract(t)}},{key:"_getTransformOriginOffset",value:function(e,t){return e.clone().transform(t).subtract(e)}},{key:"_reset",value:function(){return this.transformOrigin.set(0,0),this.setPosition(new A.default(.5*this.width,.5*this.height)),this.rotation=0,this.zoom=1,this._rasterScale=1,this._updateRawOffset(),this}},{key:"_updateBounds",value:function(){var e;return e=null===this.bounds?{minX:null,minY:null,maxX:null,maxY:null}:(0,c.default)(this.bounds)?this.bounds.call(this):this.bounds,this.minPositionX=e.minX,this.minPositionY=e.minY,this.maxPositionX=e.maxX,this.maxPositionY=e.maxY,this}},{key:"_updateRawOffset",value:function(){return this._rawOffset.copy(this._convertPositionToOffset(this.position,this.center,this.transformOrigin,this.transformation)),this._rawScaleOffset.copy(this._convertPositionToOffset(this.position,this.center,this.transformOrigin,this.scaleTransformation)),this}},{key:"addAnimation",value:function(e,t){return this.animations.add(e,t),this}},{key:"getAnimation",value:function(e){return this.animations.get(e)}},{key:"addScene",value:function(e,t){return this.scenes.add(e,t),this}},{key:"getScene",value:function(e){return this.scenes.get(e)}},{key:"setScene",value:function(e){return this.scenes.setActiveScene(e),this._reset(),this}},{key:"applyBounds",value:function(e){return void 0!==e&&(this.bounds=e,this._updateBounds()),this.setPosition(this.position),this}},{key:"destroy",value:function(){return this.setView(null),this.animations.destroy(),this.renderer.destroy(),this.scenes.destroy(),this._events.removeAllListeners(),this}},{key:"disableDragToMove",value:function(){return this.trackControl&&this.dragToMove&&this.trackControl.disableDrag(),this}},{key:"enableDragToMove",value:function(){return this.trackControl&&this.dragToMove&&this.trackControl.enableDrag(),this}},{key:"disableWheelToZoom",value:function(){return this.trackControl&&this.wheelToZoom&&this.trackControl.disableWheel(),this}},{key:"enableWheelToZoom",value:function(){return this.trackControl&&this.wheelToZoom&&this.trackControl.enableWheel(),this}},{key:"getElementPosition",value:function(e){return C.default.DOM.getObjectWorldPosition(C.default.DOM.parseView(e),this.scene,this.transformation)}},{key:"onInitialize",value:function(e){}},{key:"onBeforeRender",value:function(){}},{key:"onRender",value:function(){}},{key:"render",value:function(){return this.onBeforeRender(),null!==this.view&&this.renderer.render(),this.onRender(),this}},{key:"setPosition",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t?this.position.set(this._clampPositionX(e.x),this._clampPositionY(e.y)):this.position.set(e.x,e.y),this}},{key:"setSize",value:function(e,t){var n=!1;return Number.isFinite(e)&&e!==this.width&&(this.width=e,this.center.x=.5*e,n=!0),Number.isFinite(t)&&t!==this.height&&(this.height=t,this.center.y=.5*t,n=!0),n&&this._events.emit("change:size"),this}},{key:"setTransformOrigin",value:function(e){return e&&!e.equals(this.transformOrigin)&&(this.transformOrigin.copy(e),(this.isRotated||this.isZoomed)&&this._updateRawOffset()),this}},{key:"setView",value:function(e){return e=C.default.DOM.parseView(e),this.view&&(this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.trackControl.destroy(),this.trackControl=null,this.view=null,this.isRendered=!1,this._rasterScale=this.zoom),e&&(this.view=e,this.scenes.ensureView(),this.view.style.display="none",this.view.style.overflow="hidden",this.view.style.position="relative",this.view.appendChild(this.scenes.view),this.trackControl=new T.default(this,{draggable:this.dragToMove,onDrag:function(e){var t=e._convertOffsetToPosition(new A.default((-this.x),(-this.y)),e.center,e.transformOrigin,e.transformation);e.moveTo(t,0,{onCompleteParams:[this],onComplete:function(e){e.update()}})},onPress:function(e){e.isAnimating&&this._endDrag(this.pointerEvent)},wheelable:this.wheelToZoom,onWheel:function(e){var t,n=1,i=0,o=Math.abs(this.wheelEvent.deltaY),r=this.wheelEvent.deltaY>0?i:n,a=this.previousWheelEvent.deltaY>0?i:n,s=new A.default,u=new A.default,c=e.transformOrigin,l=e.zoom+e.zoom*e.wheelToZoomIncrement*(o>1?.5*o:1)*(r===n?1:-1);r===a&&e._clampZoom(l)!==e.zoom&&(t=e.view.getBoundingClientRect(),s.set(this.wheelEvent.clientX-t.left,this.wheelEvent.clientY-t.top),u=e._convertFOVPositionToScenePosition(s,e.position,e.center,e.transformation),Math.floor(c.x)===Math.floor(u.x)&&Math.floor(c.y)===Math.floor(u.y)||(c=u),e.zoomAt(l,c,0,{disableWheel:!1}))}})),this}},{key:"pause",value:function(){return this.animations.pause(),this}},{key:"play",value:function(e){return this.animations.play(e),this}},{key:"resume",value:function(){return this.animations.resume(),this}},{key:"reverse",value:function(e){return this.animations.reverse(e),this}},{key:"animate",value:function(e,t,n){return this.animations.add(j.ANONYMOUS,new d.default(this,n).animate(e,t,d.default._filterKeyframeEventCallbackOptions(n))),this.animations.play(j.ANONYMOUS),this}},{key:"fadeTo",value:function(e,t,n){return this.animations.add(j.ANONYMOUS,new d.default(this,n).fadeTo(e,t,d.default._filterKeyframeEventCallbackOptions(n))),this.animations.play(j.ANONYMOUS),this}},{key:"moveTo",value:function(e,t,n){return this.animations.add(j.ANONYMOUS,new d.default(this,n).moveTo(e,t,d.default._filterKeyframeEventCallbackOptions(n))),this.animations.play(j.ANONYMOUS),this}},{key:"rotateAt",value:function(e,t,n,i){return this.animations.add(j.ANONYMOUS,new d.default(this,i).rotateAt(e,t,n,d.default._filterKeyframeEventCallbackOptions(i))),this.animations.play(j.ANONYMOUS),this}},{key:"rotateTo",value:function(e,t,n){return this.animations.add(j.ANONYMOUS,new d.default(this,n).rotateTo(e,t,d.default._filterKeyframeEventCallbackOptions(n))),this.animations.play(j.ANONYMOUS),this}},{key:"shake",value:function(e,t,n){return this.animations.add(j.ANONYMOUS,new d.default(this).shake(e,t,d.default._filterKeyframeEventCallbackOptions(n))),this.animations.play(j.ANONYMOUS),this}},{key:"zoomAt",value:function(e,t,n,i){return this.animations.add(j.ANONYMOUS,new d.default(this,i).zoomAt(e,t,n,d.default._filterKeyframeEventCallbackOptions(i))),this.animations.play(j.ANONYMOUS),this}},{key:"zoomTo",value:function(e,t,n){return this.animations.add(j.ANONYMOUS,new d.default(this,n).zoomTo(e,t,d.default._filterKeyframeEventCallbackOptions(n))),this.animations.play(j.ANONYMOUS),this}},{key:"isRotated",get:function(){return Math.abs(this.rotation/360)%1>0}},{key:"isZoomed",get:function(){return 1!==this.zoom}},{key:"_rawOffsetX",get:function(){return this._rawOffset.x},set:function(e){this._rawOffset.x=e}},{key:"_rawOffsetY",get:function(){return this._rawOffset.y},set:function(e){this._rawOffset.y=e}},{key:"_rawScaleOffsetX",get:function(){return this._rawScaleOffset.x},set:function(e){this._rawScaleOffset.x=e}},{key:"_rawScaleOffsetY",get:function(){return this._rawScaleOffset.y},set:function(e){this._rawScaleOffset.y=e}},{key:"scene",get:function(){return this.scenes.activeScene}},{key:"scaleTransformation",get:function(){return(new w.default).scale(this.zoom,this.zoom)}},{key:"transformation",get:function(){return(new w.default).scale(this.zoom,this.zoom).rotate(b.default.degToRad(-this.rotation))}},{key:"zoom",get:function(){return this._zoom},set:function(e){this._zoom=this._clampZoom(e),this._updateBounds()}}]),e}();M.bounds={NONE:null,WORLD:function(){var e=this.scaleTransformation.getInverse(),t=this.center.clone().transform(e),n=new A.default(this.scene.width,this.scene.height).transform(this.scaleTransformation).subtract(this.center).transform(e);return{minX:t.x,minY:t.y,maxX:n.x,maxY:n.y}},WORLD_EDGE:function(){return{minX:0,minY:0,maxX:this.scene.width,maxY:this.scene.height}}},n.default=M},{"./animation":61,"./animationManager":62,"./constants":64,"./cssRenderer":65,"./math/math":67,"./math/matrix2":68,"./math/vector2":69,"./scene":71,"./sceneManager":72,"./trackControl":73,"./utils":74,fbemitter:1,"lodash/clamp":39,"lodash/isFunction":49}],64:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.originKeyword={AUTO:"auto"},n.Type={ANIMATION:0},n.zoomDirection={NONE:0,IN:1,OUT:-1}},{}],65:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=e("./constants"),a=function(){function e(t){i(this,e),this.camera=t}return o(e,[{key:"destroy",value:function(){return this.camera=null,this}},{key:"render",value:function(){var e=this.camera._convertPositionToOffset(this.camera.position,this.camera.center,this.camera.transformOrigin,this.camera.transformation),t=.3,n=this.camera.zoom>=1?Math.floor(this.camera.zoom):.5;this.camera.scene.view.style.visibility="visible",this.camera.zoom===this.camera.maxZoom||this.camera.zoomDirection===r.zoomDirection.IN&&this.camera.zoom>this.camera._rasterScale+t*n?(this.camera._rasterScale=this.camera.zoom,this.camera.scenes.view.style.willChange="auto"):this.camera.scenes.view.style.willChange="transform",TweenLite.set(this.camera.scenes.view,{css:{transformOrigin:this.camera.transformOrigin.x+"px "+this.camera.transformOrigin.y+"px",opacity:this.camera.fadeOpacity,rotation:-this.camera.rotation,scaleX:this.camera.zoom,scaleY:this.camera.zoom,x:-e.x,y:-e.y}}),this.camera.isRendered===!1&&(this.renderSize(),this.camera.view.style.display="block",this.camera.isRendered=!0)}},{key:"renderSize",value:function(){TweenLite.set(this.camera.view,{css:{height:this.camera.height,width:this.camera.width}})}}]),e}();n.default=a},{"./constants":64}],66:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("./utils"),s=i(a),u=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.dragProxy,a=void 0===r?t:r,u=i.onDrag,c=void 0===u?function(){}:u,l=i.onDragParams,h=void 0===l?[]:l,f=i.onDragScope,d=void 0===f?this:f,m=i.onPress,v=void 0===m?function(){}:m,p=i.onPressParams,y=void 0===p?[]:p;o(this,e),this.config={dragProxy:a,onDrag:c,onDragParams:h,onDragScope:d,onPress:v,onPressParams:y},this.control=new Draggable(t,{callbackScope:d,onDrag:c,onDragParams:h,onPress:v,onPressParams:y,zIndexBoost:!1}),this.dragProxy=s.default.DOM.parseView(a),this.isDragging=!1,this.isPressed=!1,this._onDragstart=function(e){return e.preventDefault(),e.stopPropagation(),!1},this._onDragRelease=function(e){n._endDrag(e)},this._onDragLeave=function(e){n._endDrag(e)},this._onDragMove=function(e){n.isPressed&&!n.isDragging&&(n.control.startDrag(e),n.isDragging=!0)},this._endDrag=function(e){n.control.endDrag(e),n.dragProxy.removeEventListener("mouseup",n._onDragRelease),n.dragProxy.removeEventListener("mouseleave",n._onDragLeave),n.dragProxy.removeEventListener("mousemove",n._onDragMove),n.dragProxy.removeEventListener("touchend",n._onDragRelease),n.dragProxy.removeEventListener("touchcancel",n._onDragRelease),n.dragProxy.removeEventListener("touchmove",n._onDragMove),n.isDragging=!1},this._onPress=function(e){n.dragProxy.addEventListener("mouseup",n._onDragRelease),n.dragProxy.addEventListener("mouseleave",n._onDragLeave),n.dragProxy.addEventListener("mousemove",n._onDragMove),n.dragProxy.addEventListener("touchend",n._onDragRelease),n.dragProxy.addEventListener("touchcancel",n._onDragRelease),n.dragProxy.addEventListener("touchmove",n._onDragMove),n.isPressed=!0,n.config.onPress.apply(n,n.config.onPressParams)},this._onRelease=function(e){n._release()},this._onLeave=function(e){n._release()},this._release=function(){n.isPressed=!1},this.enable()}return r(e,[{key:"destroy",value:function(){return this.disable(),this.control.kill(),this.config={},this.dragProxy=null,this}},{key:"disable",value:function(){return this.control.disable(),this.dragProxy.removeEventListener("dragstart",this._onDragstart),this.dragProxy.removeEventListener("mousedown",this._onPress),this.dragProxy.removeEventListener("mouseup",this._onRelease),this.dragProxy.removeEventListener("mouseleave",this._onLeave),this.dragProxy.removeEventListener("touchstart",this._onPress),this.dragProxy.removeEventListener("touchend",this._onRelease),this.dragProxy.removeEventListener("touchcancel",this._onRelease),this.dragProxy.style.cursor=null,this}},{key:"enable",value:function(){return this.control.enable(),this.dragProxy.addEventListener("dragstart",this._onDragstart),this.dragProxy.addEventListener("mousedown",this._onPress),this.dragProxy.addEventListener("mouseup",this._onRelease),this.dragProxy.addEventListener("mouseleave",this._onLeave),this.dragProxy.addEventListener("touchstart",this._onPress),this.dragProxy.addEventListener("touchend",this._onRelease),this.dragProxy.addEventListener("touchcancel",this._onRelease),this.dragProxy.style.cursor="move",this}},{key:"update",value:function(){return this.control.update()}},{key:"enabled",get:function(){return this.control.enabled()}},{key:"pointerEvent",get:function(){return this.control.pointerEvent}},{key:"pointerX",get:function(){return this.control.pointerX}},{key:"pointerY",get:function(){return this.control.pointerY}},{key:"target",get:function(){return this.control.target}},{key:"x",get:function(){return this.control.x}},{key:"y",get:function(){return this.control.y}}]),e}();n.default=u},{"./utils":74}],67:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={degToRad:function(e){return e*i.degToRadFactor},radToDeg:function(e){return e*i.radToDegFactor}};Object.defineProperty(i,"degToRadFactor",{value:Math.PI/180}),Object.defineProperty(i,"radToDegFactor",{value:180/Math.PI}),n.default=i},{}],68:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("lodash/isArrayLike"),s=i(a),u=function(){function e(t,n,i,r){o(this,e),this.e11=1,this.e12=0,this.e21=0,this.e22=1,4===arguments.length?this.set(t,n,i,r):(0,s.default)(t)&&4===t.length&&this.setFromArray(t)}return r(e,[{key:"clone",value:function(){return this.constructor.clone(this)}},{key:"copy",value:function(e){return this.set(e.e11,e.e12,e.e21,e.e22)}},{key:"getDeterminant",value:function(){return this.constructor.getDeterminant(this)}},{key:"getInverse",value:function(){return this.constructor.getInverse(this)}},{key:"multiplyMatrices",value:function(e){if(this.cols!==e.rows)throw new Error("Cannot multiply incompatible matrices");var t=void 0,n=void 0,i=void 0,o=void 0;return t=this.e11*e.e11+this.e12*e.e21,n=this.e11*e.e12+this.e12*e.e22,i=this.e21*e.e11+this.e22*e.e21,o=this.e21*e.e12+this.e22*e.e22,this.set(t,n,i,o),this}},{key:"multiplyScalar",value:function(e){return this.e11*=e,this.e12*=e,this.e21*=e,this.e22*=e,this}},{key:"rotate",value:function(t){var n=Math.cos(t),i=Math.sin(t),o=new e(n,(-i),i,n);return this.multiplyMatrices(o),this}},{key:"scale",value:function(t,n){return this.multiplyMatrices(new e(t,0,0,n)),this}},{key:"set",value:function(e,t,n,i){return this.e11=e,this.e12=t,this.e21=n,this.e22=i,this}},{key:"setFromArray",value:function(e){return this.set(e[0],e[1],e[2],e[3]),this}},{key:"setToIdentity",value:function(){return this.set(1,0,0,1),this}},{key:"toArray",value:function(){return this.constructor.toArray(this)}},{key:"toFloat32Array",value:function(){return this.constructor.toFloat32Array(this)}}],[{key:"clone",value:function(t){return new e(e.toArray(t))}},{key:"getDeterminant",value:function(e){return e.e11*e.e22-e.e12*e.e21}},{key:"getInverse",value:function(t){return e.multiplyScalar(new e(t.e22,(-t.e12),(-t.e21),t.e11),1/e.getDeterminant(t))}},{key:"multiplyMatrices",value:function(t,n){if(t.cols===n.rows){var i=void 0,o=void 0,r=void 0,a=void 0;return i=t.e11*n.e11+t.e12*n.e21,o=t.e11*n.e12+t.e12*n.e22,r=t.e21*n.e11+t.e22*n.e21,a=t.e21*n.e12+t.e22*n.e22,new e(i,o,r,a)}throw new Error("Cannot multiply incompatible matrices")}},{key:"multiplyScalar",value:function(t,n){var i=t.e11*n,o=t.e12*n,r=t.e21*n,a=t.e22*n;return new e(i,o,r,a)}},{key:"rotate",value:function(t,n){var i=Math.cos(n),o=Math.sin(n),r=new e(i,(-o),o,i);return e.multiplyMatrices(t,r)}},{key:"scale",value:function(t,n,i){return e.multiplyMatrices(t,new e(n,0,0,i))}},{key:"toArray",value:function(e){var t=new Array(4);return t[0]=e.e11,t[1]=e.e12,t[2]=e.e21,t[3]=e.e22,t}},{key:"toFloat32Array",value:function(e){var t=new Float32Array(4);return t[0]=e.e11,t[1]=e.e12,t[2]=e.e21,t[3]=e.e22,t}}]),e}();Object.defineProperty(u.prototype,"cols",{enumerable:!0,value:2}),Object.defineProperty(u.prototype,"rows",{enumerable:!0,value:2}),n.default=u},{"lodash/isArrayLike":46}],69:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t,n){i(this,e),this.x=void 0!==t?t:0,this.y=void 0!==n?n:0}return o(e,[{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"clone",value:function(){return this.constructor.clone(this)}},{key:"copy",value:function(e){return this.set(e.x,e.y)}},{key:"equals",value:function(e){return this.constructor.equals(this,e)}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"subtract",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"toArray",value:function(){return this.constructor.toArray(this)}},{key:"transform",value:function(e){var t=this.x*e.e11+this.y*e.e12+(e.tx?e.tx:0),n=this.x*e.e21+this.y*e.e22+(e.ty?e.ty:0);return this.set(t,n)}}],[{key:"add",value:function(t,n){return new e(t.x+n.x,t.y+n.y)}},{key:"clone",value:function(t){return new e(t.x,t.y)}},{key:"equals",value:function(e,t){return e.x===t.x&&e.y===t.y}},{key:"max",value:function(t,n){return new e(Math.max(t.x,n.x),Math.max(t.y,n.y))}},{key:"min",value:function(t,n){return new e(Math.min(t.x,n.x),Math.min(t.y,n.y))}},{key:"multiplyScalar",value:function(t,n){var i=t.x*n,o=t.y*n;return new e(i,o)}},{key:"subtract",value:function(t,n){return new e(t.x-n.x,t.y-n.y)}},{key:"toArray",value:function(e){var t=new Array(2);return t[0]=e.x,t[1]=e.y,t}},{key:"transform",value:function(t,n){var i=t.x*n.e11+t.y*n.e12+(n.tx?n.tx:0),o=t.x*n.e21+t.y*n.e22+(n.ty?n.ty:0);return new e(i,o)}}]),e}();n.default=r},{}],70:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var o=e("./animation"),r=i(o),a=e("./camera"),s=i(a),u=e("./cssRenderer"),c=i(u),l=e("./math/math"),h=i(l),f=e("./math/matrix2"),d=i(f),m=e("./scene"),v=i(m),p=e("./sceneManager"),y=i(p),g=e("./utils"),b=i(g),_=e("./math/vector2"),w=i(_),O=e("./version"),k=i(O),P={Animation:r.default,Camera:s.default,CSSRenderer:c.default,Math:h.default,Matrix2:d.default,Scene:v.default,SceneManager:y.default,Utils:b.default,Vector2:w.default,version:k.default};t.exports=P},{"./animation":61,"./camera":63,"./cssRenderer":65,"./math/math":67,"./math/matrix2":68,"./math/vector2":69,"./scene":71,"./sceneManager":72,"./utils":74,"./version":75}],71:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("./utils"),s=i(a),u={AUTO:"auto"},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"auto";o(this,e),this.view=null,this._width=n,this._height=i,this.setView(t)}return r(e,[{key:"activateView",value:function(){return this.view||(this.view=document.createElement("div")),this.view.style.visibility="hidden",this.view.style.display="block",this}},{key:"destroy",value:function(){return this.removeView(),this.view=null,this}},{key:"removeView",value:function(){return this.view&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this}},{key:"setView",value:function(e){e=s.default.DOM.parseView(e),this.removeView(),this.view=e,this.removeView()}},{key:"width",get:function(){return this._width!==u.AUTO?this._width:this.view?this.view.offsetWidth:0},set:function(e){this._width=e}},{key:"height",get:function(){return this._height!==u.AUTO?this._height:this.view?this.view.offsetHeight:0},set:function(e){this._height=e}}]),e}();n.default=c},{"./utils":74}],72:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("./scene"),s=i(a),u=function(){function e(){o(this,e),this.activeScene=null,this.view=null,this._scenes={}}return r(e,[{key:"add",value:function(e,t){return"string"==typeof t&&(t=new s.default(t)),this._scenes[e]=t,this}},{key:"destroy",value:function(){for(var e in this._scenes)this._scenes[e].destroy();return this.activeScene=null,this.view=null,this._scenes={},this}},{key:"ensureView",value:function(){return this.view||(this.view=document.createElement("div"),this.view.style.position="absolute"),this}},{key:"get",value:function(e){return this._scenes[e]}},{key:"setActiveScene",value:function(e){return this.activeScene&&this.activeScene.removeView(),this.activeScene=this._scenes[e],this.view&&(this.activeScene.activateView(),this.view.appendChild(this.activeScene.view),this.view.style.width=this.activeScene.width+"px",this.view.style.height=this.activeScene.height+"px"),this}}]),e}();n.default=u},{"./scene":71}],73:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("./dragControl"),s=i(a),u=e("./wheelControl"),c=i(u),l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.draggable,r=void 0!==i&&i,a=n.onDrag,u=void 0===a?void 0:a,l=n.onPress,h=void 0===l?void 0:l,f=n.wheelable,d=void 0!==f&&f,m=n.onWheel,v=void 0===m?void 0:m;o(this,e),this.camera=t,this.isDraggable=r===!0,this.dragControl=this.isDraggable?new s.default(this.camera.scenes.view,{dragProxy:this.camera.view,onDrag:u,onDragParams:[this.camera],onPress:h,onPressParams:[this.camera],zIndexBoost:!1}):null,this.isWheelable=d===!0,this.wheelControl=this.isWheelable?new c.default(this.camera.view,{onWheel:v,onWheelParams:[this.camera]}):null}return r(e,[{key:"destroy",value:function(){return this.camera=null,this.isDraggable&&(this.dragControl.destroy(),this.dragControl=null),this.isWheelable&&(this.wheelControl.destroy(),this.wheelControl=null),this}},{key:"disableDrag",value:function(){return this.isDraggable&&this.dragControl.disable(),this}},{key:"enableDrag",value:function(){return this.isDraggable&&this.dragControl.enable(),this}},{key:"disableWheel",value:function(){return this.isWheelable&&this.wheelControl.disable(),this}},{key:"enableWheel",value:function(){return this.isWheelable&&this.wheelControl.enable(),this}},{key:"dragEnabled",get:function(){return!!this.isDraggable&&this.dragControl.enabled}},{key:"wheelEnabled",get:function(){return!!this.isWheelable&&this.wheelControl.enabled}}]),e}();n.default=l},{"./dragControl":66,"./wheelControl":76}],74:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("lodash/isElement"),r=i(o),a=e("lodash/isFunction"),s=i(a),u=e("lodash/isObject"),c=i(u),l=e("./constants"),h=e("./math/vector2"),f=i(h),d={getCssTransform:function(e){var t=window.getComputedStyle(e).getPropertyValue("transform");return t=t.replace(/^\w+\(/,"").replace(/\)$/,"").replace(/\s+/g,"").split(",")},getTransformMatrix:function(e){var t=utils.getCssTransform(e),n=[];return"none"===t[0]?n=[1,0,0,1,0,0]:t.forEach(function(e){n.push(parseFloat(e))}),n},setCssTransform:function(e,t,n){t=t||{};var i=utils.getCssTransform(e),o=["inherit","initial","none","unset"],r=[1,0,0,1,0,0],a={scaleX:0,scaleY:3,skewY:1,skewX:2,translateX:4,translateY:5};t.scale&&(t.scaleX=t.scaleY=t.scale),t.translate&&(t.translateX=t.translateY=t.translate),o.indexOf(i[0])&&(i=r);for(var s in a)if(t[s]){if(!_.isFinite(t[s]))throw new Error("Cannot set an invalid CSS matrix value");i[a[s]]=t[s]}return e.style.transform="matrix("+i.join(", ")+")",n&&(n.isTransitioning=!0,0===parseFloat(window.getComputedStyle(e).getPropertyValue("transition-duration"))&&(n.isTransitioning=!1)),e},setCssTransition:function(e,t){t=t||{};var n={transitionDelay:t.delay||"0s",
transitionDuration:t.duration||"0s",transitionProperty:t.property||"all",transitionTimingFunction:t.timingFunction||"ease"};for(var i in n)e.style[i]=n[i];return e},throttleToFrame:function(e){var t=void 0,n=void 0,i=!1;return function(){t=this,n=arguments,i||(i=!0,window.requestAnimationFrame(function(o){Array.prototype.push.call(n,o),e.apply(t,n),i=!1}))}},parseOrigin:function(e,t,n){var i=l.originKeyword.AUTO,o=d.parsePosition(e,t,n);return null!==o&&(i=o),i},parsePosition:function(e,t,n){var i,o=null;return(0,s.default)(e)&&(e=e()),"string"==typeof e&&(e=t.view.querySelector(e)),(0,r.default)(e)?(i=d.DOM.getObjectWorldPosition(e,t,n),o=new f.default(i.x,i.y)):(0,c.default)(e)&&(o=new f.default(e.x,e.y)),o}};d.DOM={getObjectWorldPosition:function(e,t,n){var i=e.getBoundingClientRect(),o=new f.default(i.left+.5*i.width,i.top+.5*i.height),r=t.view.getBoundingClientRect(),a=new f.default(r.left+.5*r.width,r.top+.5*r.height),s=o.subtract(a).transform(n.getInverse());return s.add(new f.default(.5*t.width,.5*t.height))},parseView:function(e){var t=null;return"string"==typeof e?t=document.querySelector(e):(0,r.default)(e)&&(t=e),t}},d.Time={getFPSDuration:function(e,t){var n=0;switch(t){case"s":n=1e3/e/1e3;break;case"ms":n=1e3/e}return n}},n.default=d},{"./constants":64,"./math/vector2":69,"lodash/isElement":47,"lodash/isFunction":49,"lodash/isObject":52}],75:[function(e,t,n){"use strict";t.exports="0.9.0-alpha"},{}],76:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("lodash/throttle"),s=i(a),u=e("./utils"),c=i(u),l=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.onWheel,a=void 0===r?function(){}:r,u=i.onWheelParams,l=void 0===u?[]:u,h=i.onWheelScope,f=void 0===h?this:h;o(this,e),this.config={onWheel:a,onWheelParams:l,onWheelScope:f},this.target=c.default.DOM.parseView(t),this.wheelEvent={},this.previousWheelEvent={},this._enabled=!0,this._throttledOnWheel=(0,s.default)(function(e){this.previousWheelEvent=this.wheelEvent,this.wheelEvent=e,this.config.onWheel.apply(this.config.onWheelScope,this.config.onWheelParams)},c.default.Time.getFPSDuration(30,"ms")),this._onWheel=function(e){e.preventDefault(),e.stopPropagation(),n._throttledOnWheel(e)},this.enable()}return r(e,[{key:"destroy",value:function(){return this.disable(),this.config={},this.target=null,this}},{key:"disable",value:function(){return this.target.removeEventListener("wheel",this._onWheel),this._enabled=!1,this}},{key:"enable",value:function(){return this.target.addEventListener("wheel",this._onWheel),this._enabled=!0,this}},{key:"enabled",get:function(){return this._enabled}}]),e}();n.default=l},{"./utils":74,"lodash/throttle":58}]},{},[70])(70)});