<!DOCTYPE html>
<html lang="en">
<head>
	<title>Backbone Camera Demo</title>
    <link type="text/css" href="styles/font-awesome.min.css" rel="stylesheet" />
    <link type="text/css" href="styles/bootstrap.min.css" rel="stylesheet" />
    <link type="text/css" href="styles/github-markdown.css" rel="stylesheet" />
    <link type="text/css" href="../src/styles/camera.css" rel="stylesheet" />
    <link type="text/css" href="styles/demo.css" rel="stylesheet" />
</head>
<body>
    <h1>Backbone Camera Demo</h1>
    
    <div class="demo-container">
        <div class="demo-main">
            <div id="camera" class="bcv-camera">
                <div class="bcv-ignore-pointer-events" style="box-sizing: border-box; position: absolute; top: 0; left: 0; width: 100px; height: 100px; border: 1px solid blue; z-index: 1;"></div>
                <div class="bcv-ignore-pointer-events" style="box-sizing: border-box; position: absolute; top: 0; left: 0; width: 200px; height: 200px; border: 1px solid red; z-index: 1;"></div>

                <div class="bcv-ignore-pointer-events" style="box-sizing: border-box; position: absolute; top: 105px; left: 180px; width: 3px; height: 3px; background-color: red; z-index: 1;"></div>
                <div class="bcv-ignore-pointer-events" style="box-sizing: border-box; position: absolute; top: 249px; left: 615px; width: 3px; height: 3px; background-color: red; z-index: 1;"></div>

                <div class="bcv-ignore-pointer-events" style="box-sizing: border-box; position: absolute; top: 50%; left: 50%; width: 50px; height: 2px; background-color: red; transform: translateX(-25px) translateY(-1px); z-index: 1;"></div>
                <div class="bcv-ignore-pointer-events" style="box-sizing: border-box; position: absolute; top: 50%; left: 50%; width: 2px; height: 50px; background-color: red; transform: translateX(-1px) translateY(-25px); z-index: 1;"></div>
                
                <div class="bcv-ignore-pointer-events" style="box-sizing: border-box; position: absolute; top: 0; left: 0; bottom: 0; right: 0; border: 1px solid black; z-index: 1;"></div>
                <div id="point" style="position: absolute; width: 4px; height: 4px; background-color: #ff9900; top: -1000px; left: -1000px; z-index: 1000;"></div>
            </div>

            <div id="scene1" class="bcv-scene" style="display: none;">
                <div style="box-sizing: border-box; width: 1200px; height: 700px; background-color: #def; border: 10px solid black;"></div>
                <div style="box-sizing: border-box; position: absolute; top: 100px; left: 300px; width: 200px; height: 200px; background-color: #cdf;"></div>
                <div id="box100" style="box-sizing: border-box; position: absolute; top: 0; left: 0; width: 100px; height: 100px; border: 1px solid green;"></div>
                <div style="box-sizing: border-box; position: absolute; top: 0; left: 0; width: 150px; height: 150px; border: 1px solid green;"></div>
                <div style="box-sizing: border-box; position: absolute; top: 0; left: 0; width: 200px; height: 200px; border: 1px solid green;"></div>
                <div style="box-sizing: border-box; position: absolute; top: 0; left: 0; width: 250px; height: 250px; border: 1px solid green;"></div>
                <div style="box-sizing: border-box; position: absolute; top: 0; left: 0; width: 300px; height: 300px; border: 1px solid green;"></div>
            </div>
            
            <div id="scene2" class="bcv-scene" style="display: none;">
                <img src="images/FFL-Spritesheet-White-1827x1215.png" alt="Final Fantasy Legend Sprites" width="1827" height="1215" />
                <div id="box100" style="box-sizing: border-box; position: absolute; top: 0; left: 0; width: 100px; height: 100px; border: 1px solid green;"></div>
                <div style="box-sizing: border-box; position: absolute; top: 0; left: 0; width: 150px; height: 150px; border: 1px solid green;"></div>
                <div style="box-sizing: border-box; position: absolute; top: 0; left: 0; width: 200px; height: 200px; border: 1px solid green;"></div>
                <div style="box-sizing: border-box; position: absolute; top: 0; left: 0; width: 250px; height: 250px; border: 1px solid green;"></div>
                <div style="box-sizing: border-box; position: absolute; top: 0; left: 0; width: 300px; height: 300px; border: 1px solid green;"></div>
            </div>
            
            <div id="scene3" class="bcv-scene" style="display: none;">
                <div style="box-sizing: border-box; width: 1000px; height: 500px; background-color: #eee; border: 10px solid black; position: absolute;"></div>
                <img src="images/FFL-Meat-White-64x48.png" alt="Final Fantasy Legend Meat" width="64" height="48" style="position: absolute; left: 100px; top: 100px;" />
                <img src="images/FFL-Meat-White-64x48.png" alt="Final Fantasy Legend Meat" width="64" height="48" style="position: absolute; left: 200px; top: 100px;"/>
                <img src="images/FFL-Meat-White-64x48.png" alt="Final Fantasy Legend Meat" width="64" height="48" style="position: absolute; left: 100px; top: 200px;"/>
                <img src="images/FFL-Meat-White-64x48.png" alt="Final Fantasy Legend Meat" width="64" height="48" style="position: absolute; left: 200px; top: 200px;"/>
                <div id="box100" style="box-sizing: border-box; position: absolute; top: 0; left: 0; width: 100px; height: 100px; border: 1px solid green;"></div>
            </div>
        
            <h2>Console Examples</h2>
            <ul>
                <li class="markdown-body">
                    <pre><code class="language-js">camera.<span class="pl-en">zoomOn</span>(<span class="pl-c1">2</span>, <span class="pl-c1">300</span>, <span class="pl-c1">300</span>, <span class="pl-c1">5</span>).<span class="pl-en">rotateAt</span>(<span class="pl-c1">30</span>, <span class="pl-c1">300</span>, <span class="pl-c1">300</span>, <span class="pl-c1">5</span>);</code></pre>
                </li>
            </ul>
        </div>
        
        <div class="demo-sidebar">
            <h2>Commands</h2>
            <div id="app" style="padding: 1.0em; background-color: gray;"></div>
            <div id="print"></div>
        </div>
    </div>
    
    <script type="text/javascript" src="../src/scripts/lib/lodash.min.js"></script>
    <script type="text/javascript" src="../src/scripts/lib/backbone-min.js"></script>
    <script type="text/javascript" src="../src/scripts/lib/TweenMax.min.js"></script>
    <script type="text/javascript" src="../src/scripts/lib/Draggable.min.js"></script>
    <script type="text/javascript" src="../build/scripts/ModifiersPlugin.min.js"></script>
    <script type="text/javascript" src="../build/scripts/oculo.js"></script>
    <!--
    <script type="text/javascript" src="scripts/behaviorView.js"></script>
    <script type="text/javascript" src="scripts/scrollView.js"></script>
    <script type="text/javascript" src="scripts/debugPropertyView.js"></script>
    <script type="text/javascript" src="scripts/debugPropertiesView.js"></script>
    <script type="text/javascript" src="scripts/debugScrollView.js"></script>
    <script type="text/javascript" src="scripts/debugView.js"></script>
    -->
    
    <script type="text/javascript" src="scripts/demo.js"></script>
    
    <script type="text/javascript">
        camera = new Oculo.Camera({
            view: '#camera',
            bounds: Oculo.Camera.bounds.WORLD_EDGE,
            debug: false,
            dragToMove: true,
            //maxZoom: 6,
            //minZoom: 0.1,
            wheelToZoom: true,
            //wheelToZoomIncrement: 0.5,
            width: 1000,
            height: 500
        });
        
        // Scenes
        camera.addScene('scene1', '#scene1');
        camera.addScene('scene2', new Oculo.Scene(camera, '#scene2'));
        camera.addScene('scene3', '#scene3');
        camera.setScene('scene1');
        
        // Animations
        //camera.addAnimation('moveTobox100', { duration: 2, position: '#box100', rotation:-20, zoom: 1.5 });
        camera.addAnimation('moveTobox100', new Oculo.Animation(camera).animate({position: '#box100', rotation:-20, zoom: 1.5}, 2));
        camera.addAnimation('moveTo2000', new Oculo.Animation(camera).animate({position: {x:2000, y:500}, zoom: 1.5}, 2));
        camera.addAnimation('moveTo800Slow', new Oculo.Animation(camera).animate({position: {x:800}, zoom: 1.5}, 8));
        camera.addAnimation('rotateAt200', new Oculo.Animation(camera).rotateAt({x:200, y:200}, -50, 5));
        camera.addAnimation('rotateTo20', new Oculo.Animation(camera).rotateTo(-20, 2));
        camera.addAnimation('shakeEaseNone', new Oculo.Animation(camera).shake(0.1, 2, Oculo.Animation.shake.direction.BOTH));
        camera.addAnimation('shakeEase', new Oculo.Animation(camera).shake(0.1, 2, Oculo.Animation.shake.direction.BOTH, { ease: Power2.easeIn }));
        camera.addAnimation('shakeEaseIn', new Oculo.Animation(camera).shake(0.1, 2, Oculo.Animation.shake.direction.BOTH, { easeIn: Power2.easeIn }));
        camera.addAnimation('shakeEaseOut', new Oculo.Animation(camera).shake(0.1, 2, Oculo.Animation.shake.direction.BOTH, { easeOut: Power2.easeOut }));
        camera.addAnimation('shakeEaseInOut', new Oculo.Animation(camera).shake(0.1, 4, Oculo.Animation.shake.direction.BOTH, { easeIn: Power2.easeIn, easeOut: Power2.easeOut }));
        camera.addAnimation('shakeNoBounds', new Oculo.Animation(camera).shake(0.1, 2, Oculo.Animation.shake.direction.BOTH, { respectBounds: false }));
        camera.addAnimation('zoomAt100', new Oculo.Animation(camera).zoomAt({x:100, y:100}, 2, 2));
        camera.addAnimation('zoomTo50', new Oculo.Animation(camera).zoomTo(0.5, 2));
        camera.addAnimation('zoomTo200', new Oculo.Animation(camera).zoomTo(2, 2));
        camera.addAnimation('instantZoom', new Oculo.Animation(camera).zoomTo(2, 0));
        camera.addAnimation('instantShake', new Oculo.Animation(camera).shake(0.1, 0));
        camera.addAnimation('backAndForth', new Oculo.Animation(camera).animate({position: '#box100', rotation:20, zoom: 1.5}, 1.5, {ease: Power4.easeOut}).animate({position: 'previous', rotation: 'previous', zoom: 'previous'}, 1.5, {ease: Power3.easeOut}));
        
        camera.addAnimation('moveTo0001', new Oculo.Animation(camera, {useFrames: true}).animate({position: {x:0,y:0}, zoom: 0.166}, 61, {ease: Power0.easeNone}));
        camera.addAnimation('moveTo0005', new Oculo.Animation(camera, {useFrames: true}).animate({position: {x:0,y:0}, zoom: 0.5}, 61, {ease: Power0.easeNone}));
        camera.addAnimation('moveTo0006', new Oculo.Animation(camera, {useFrames: true}).animate({position: {x:0,y:0}, zoom: 0.666}, 61, {ease: Power0.easeNone}));
        camera.addAnimation('moveTo001', new Oculo.Animation(camera, {useFrames: true}).animate({position: {x:0,y:0}, zoom: 1}, 61, {ease: Power0.easeNone}));
        camera.addAnimation('moveTo0015', new Oculo.Animation(camera, {useFrames: true}).animate({position: {x:0,y:0}, zoom: 1.5}, 61, {ease: Power0.easeNone}));
        camera.addAnimation('moveTo002', new Oculo.Animation(camera, {useFrames: true}).animate({position: {x:0,y:0}, zoom: 2}, 61, {ease: Power0.easeNone}));
        camera.addAnimation('moveTo006', new Oculo.Animation(camera, {useFrames: true}).animate({position: {x:0,y:0}, zoom: 6}, 61, {ease: Power0.easeNone}));
        camera.printPath = function () {
            var el = document.getElementById('print');
            var html = 'id,x,y';
            camera.path.forEach(function (item) {
                html += item.id + ',' + item.x + ',' + item.y + '<br>';
            });
            el.innerHTML = html;
        }
        
        camera.render();
        //camera.moveTo({x:200, y:200}, 0);
        //camera.play('moveTobox100');
    </script>
    
    <script>
        function markPoint (x, y, camera) {
            var pointElement = document.getElementById('point');
            var point = new Oculo.Vector2(x, y).transform(new Oculo.Matrix2().scale(camera.zoom, camera.zoom).rotate(Oculo.Math.degToRad(-camera.rotation)));

            pointElement.style.top = (point.y - 2) + 'px';
            pointElement.style.left = (point.x - 2) + 'px';
        }
    </script>
</body>
</html>